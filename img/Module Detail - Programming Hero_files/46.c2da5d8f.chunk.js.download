(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[46],{1166:function(e,a,t){"use strict";var r=t(79),n=t.n(r),o=t(32),l=t(119),s=t(39),i=t(1),c=t.n(i),m=t(23),d=t(26),u=t(1102),p=t(1097),v=t(27),g=t(1121),h=t(1139),b=t.n(h),f=t(1140),E=t.n(f),N=t(43),w=t(201),y=t(106),x=t(50),j=t(63),O=t(130),k=t(105);a.a=Object(m.k)((function(e){var a=Object(N.b)(),r=(Object(m.i)().search,Object(i.useState)(!1)),h=Object(s.a)(r,2),f=h[0],C=h[1],S=Object(u.a)(),P=S.register,q=S.handleSubmit,F=S.watch,I=S.errors,L=S.setValue,U=(S.reset,Object(i.useState)(!1)),R=Object(s.a)(U,2),_=R[0],J=R[1],V=Object(i.useState)({message:null,error:!1,icon:null}),B=Object(s.a)(V,2),A=B[0],D=B[1],H=Object(i.useState)(!1),M=Object(s.a)(H,2),Y=M[0],z=M[1];return c.a.createElement("form",{id:"authForm",autoComplete:"off",onSubmit:q((function(t){var r,s;t.email=null===(r=t.email)||void 0===r||null===(s=r.toLowerCase())||void 0===s?void 0:s.trim(),C(!0),"Login"===e.label?v.a.login(t.email,t.password).then((function(){return w.a.getLoggedUserInfo()})).then(function(){var t=Object(l.a)(n.a.mark((function t(r){var l,s,i,c,m,d,u,p,g,h,b,f,E;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Object(y.b)(Object(o.a)(Object(o.a)(Object(o.a)({},v.a.getCurrentUser().user),r.data.data),{},{role:v.a.getCurrentUser().user.role}))),t.next=3,null===(l=v.a.getCurrentUser())||void 0===l||null===(s=l.user)||void 0===s?void 0:s._id;case 3:return m=t.sent,t.next=6,k.a.getCartFromLocalStorage(m);case 6:return d=t.sent,t.next=9,localStorage.getItem("anonymous");case 9:if(u=t.sent,"jpi"===(null===(i=r.data.data)||void 0===i?void 0:i.role)&&e.history.push("/job-dashboard"),p=!1,!u||"student"!==(null===(c=r.data.data)||void 0===c?void 0:c.role)){t.next=19;break}return JSON.parse(u).forEach((function(e){r.data.data.parchasedCourse.forEach((function(a){var t;(null===e||void 0===e?void 0:e._id)===(null===a||void 0===a||null===(t=a.courseId)||void 0===t?void 0:t._id)&&(p=!0)}))})),"pending"===(null===(g=r.data.data)||void 0===g?void 0:g.lastOrdered)||p?a(Object(O.b)()):localStorage.setItem(m,u),localStorage.removeItem("anonymous"),t.abrupt("return",{alreadyPurchase:p,user:null===r||void 0===r||null===(h=r.data)||void 0===h||null===(b=h.data)||void 0===b?void 0:b.lastOrdered});case 19:return a(Object(O.c)(d)),t.abrupt("return",{alreadyPurchase:!0,user:null===r||void 0===r||null===(f=r.data)||void 0===f||null===(E=f.data)||void 0===E?void 0:E.lastOrdered});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(a){"pending"!==(null===a||void 0===a?void 0:a.user)&&"rejected"!==(null===a||void 0===a?void 0:a.user)?(e.history.push((null===a||void 0===a?void 0:a.alreadyPurchase)?"/dashboard":null===e||void 0===e?void 0:e.redirect),C(!1)):e.history.push("/checkout")})).catch((function(e){var a,t;C(!1),D({error:!0,message:(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.msg)||(null===e||void 0===e?void 0:e.message)||"Something went wrong",icon:E.a})})):"Register"===e.label&&((null===e||void 0===e?void 0:e.redirect)?(t.redirect="formEnrollNow",v.a.register(t.name,t.email,t.phone,t.password,t.redirect).then((function(){return w.a.getLoggedUserInfo()})).then(function(){var e=Object(l.a)(n.a.mark((function e(t){var r,l,s,i,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Object(y.b)(Object(o.a)(Object(o.a)(Object(o.a)({},v.a.getCurrentUser().user),t.data.data),{},{role:v.a.getCurrentUser().user.role}))),e.next=3,null===(r=v.a.getCurrentUser())||void 0===r||null===(l=r.user)||void 0===l?void 0:l._id;case 3:return s=e.sent,e.next=6,k.a.getCartFromLocalStorage(s);case 6:i=e.sent,(c=localStorage.getItem("anonymous"))?(localStorage.setItem(s,c),localStorage.removeItem("anonymous")):a(Object(O.c)(i));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).then((function(){C(!1),(null===e||void 0===e?void 0:e.redirect)&&e.history.push(null===e||void 0===e?void 0:e.redirect)})).catch((function(e){var a,t;C(!1),D({error:!0,message:(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.msg)||"Something went wrong",icon:E.a})}))):v.a.register(t.name,t.email,t.phone,t.password).then((function(e){document.getElementById("authForm").reset(),J(!0),C(!1),D({error:!1,message:"Check your email for confirmation",icon:b.a})}),(function(e){var a,t,r,n,o;e.response.data.msg&&(C(!1),D({error:!0,message:(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t||null===(r=t.msg)||void 0===r?void 0:r.length)?null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.msg:"Something went wrong!",icon:E.a}))})).catch((function(e){J(!0),C(!1),D({error:!1,message:"An error occurred while sending activation mail. Please fillup the sign-up form again.!",icon:E.a})})))})),className:"auth-form py-4 py-md-5 px-3  px-md-5 bg-white"},c.a.createElement("h2",{className:"mb-4"},e.label),(null===A||void 0===A?void 0:A.error)&&c.a.createElement("p",{className:"text-danger py-2"},"string"===typeof(null===A||void 0===A?void 0:A.message)&&(null===A||void 0===A?void 0:A.message)),"Register"===e.label&&c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"sr-only",htmlFor:"name"},"Name"),c.a.createElement("input",{placeholder:"Name",id:"name",name:"name",type:"text",className:"form-control",ref:P({required:!0})}),I.name&&c.a.createElement("span",{className:"text-danger"},"Name is required")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"sr-only",htmlFor:"username"},"Email "),c.a.createElement("input",{placeholder:"Email",onBlur:function(e){var a;return L("email",null===(a=F("email"))||void 0===a?void 0:a.trim())},id:"email",name:"email",type:"email",className:"form-control",ref:P({required:!0,pattern:p.a.email}),autoComplete:"username"}),I.email&&c.a.createElement("span",{className:"text-danger"},"pattern"===I.email.type?"Valid email required!":"Email is Required!")),"Register"===e.label&&c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"sr-only",htmlFor:"phone"},"Phone No."),c.a.createElement("input",{placeholder:"Phone No.",id:"phone",name:"phone",type:"tel",className:"form-control",ref:P({required:!0,pattern:p.a.phone}),autocomplete:"chrome-off"}),I.phone&&c.a.createElement("span",{className:"text-danger"},"pattern"===I.phone.type?"Valid phone number required!":"Phone number is Required!")),c.a.createElement("div",{className:"form-group password-box"},c.a.createElement("label",{className:"sr-only",htmlFor:"email"},"Password"),c.a.createElement("input",{id:"password",placeholder:"Password",name:"password",type:Y?"text":"password",className:"form-control",ref:P({required:!0})}),c.a.createElement("button",{className:"btn show-pass",type:"button",onClick:function(){return z(!Y)}},c.a.createElement(x.a,{icon:Y?j.q:j.p})),F("password")?c.a.createElement("span",{className:"text-danger"},!p.a.password.test(F("password"))&&"Register"===e.label&&"Password should contain at least 6 character!"):I.password&&c.a.createElement("span",{className:"text-danger"},I.phone&&"Password id required!")),"Login"===e.label&&c.a.createElement("div",{className:"form-group d-md-flex justify-content-between"},c.a.createElement("div",{className:"form-check"},c.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"rememberCheck",name:"remember"}),c.a.createElement("label",{className:"form-check-label text-muted",htmlFor:"rememberCheck"},"Remember Me")),c.a.createElement(d.b,{className:"font-weight-bold text-underline",to:"/forgot-password"},"Forgot Password")),"Register"===e.label&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"form-check"},c.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"agree",name:"agree",ref:P({required:!0})}),c.a.createElement("label",{className:"form-check-label text-muted",htmlFor:"agree"},"I agree to",c.a.createElement(d.b,{to:"/terms-of-service",className:"text-danger m-0 ml-2"}," the terms and conditions")))),I.agree&&c.a.createElement("span",{className:"text-danger"},"You have to agree with our terms and conditions!")),c.a.createElement("div",{className:"form-group pt-3"},c.a.createElement("button",{disabled:f,type:"submit",className:"btn btn-block btn-danger francy-btn"},f?c.a.createElement("img",{src:t(646),alt:"Loading ..."}):c.a.createElement("span",null,e.label))),c.a.createElement(g.a,{openDialog:_,handleClickClose:function(){J(!1)}},c.a.createElement("div",{className:"text-center border py-5 px-3 px-md-5"},c.a.createElement("img",{src:A.icon,alt:""}),c.a.createElement("h5",{className:"mt-5"},"string"===typeof(null===A||void 0===A?void 0:A.message)&&(null===A||void 0===A?void 0:A.message)))))}))},892:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t.n(r),o=t(23),l=t(1166),s=t(1251),i=t(27);a.default=function(e){return document.title=e.name+" - Programming Hero",i.a.getCurrentUser()?n.a.createElement(o.a,{from:"/login",to:"/"}):n.a.createElement("div",null,n.a.createElement(s.a,null,n.a.createElement(l.a,{label:"Login"})))}}}]);
//# sourceMappingURL=46.c2da5d8f.chunk.js.map